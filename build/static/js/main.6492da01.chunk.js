(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{45:function(e,t,a){e.exports=a(70)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},67:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(13),r=a.n(c),l=(a(50),a(6)),s=(a(51),a(52),a(97)),i=a(16),m=a.n(i),u=(m.a.initializeApp({apiKey:"AIzaSyAYUoTWRUlc0ohZc6clNFPlHAVV5wurqMo",authDomain:"instagram-clone-806f8.firebaseapp.com",databaseURL:"https://instagram-clone-806f8.firebaseio.com",projectId:"instagram-clone-806f8",storageBucket:"instagram-clone-806f8.appspot.com",messagingSenderId:"869152460090",appId:"1:869152460090:web:d7fde6b118871330bf9403",measurementId:"G-39GEQ33Z8X"}),m.a.firestore()),p=m.a.auth(),d=m.a.storage();function g(e){var t=e.postId,a=e.user,c=e.username,r=e.caption,i=e.imageUrl,p=Object(n.useState)([]),d=Object(l.a)(p,2),g=d[0],f=d[1],h=Object(n.useState)([]),E=Object(l.a)(h,2),v=E[0],b=E[1];Object(n.useEffect)((function(){var e;return console.log("here"),t&&(e=u.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){f(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]);return o.a.createElement("div",{className:"post"},o.a.createElement("div",{className:"post__header"},o.a.createElement(s.a,{className:"post__avatar",alt:"Mario",src:"/static/images/avatar/1.jpg"}),o.a.createElement("h3",null,c)),o.a.createElement("img",{className:"post__image",src:i}),o.a.createElement("h4",{className:"post__text"},o.a.createElement("strong",null,c,":")," ",r),o.a.createElement("div",{className:"post__comments"},g.map((function(e){return o.a.createElement("p",null,o.a.createElement("strong",null,e.username)," ",e.text)}))),a&&o.a.createElement("form",{className:"post__commentBox"},o.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:v,onChange:function(e){return b(e.target.value)}}),o.a.createElement("button",{disabled:!v,className:"post__button",type:"submit",onClick:function(e){e.preventDefault(),u.collection("posts").doc(t).collection("comments").add({username:a.displayName,text:v,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),b("")}},"Post")))}var f=a(93),h=a(94),E=a(96),v=a(95);a(67);var b=function(e){var t=e.username,a=Object(n.useState)(""),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(""),p=Object(l.a)(i,2),g=p[0],f=p[1],h=Object(n.useState)(""),E=Object(l.a)(h,2),b=E[0],_=E[1];return o.a.createElement("div",{className:"imageUpload"},o.a.createElement("progress",{className:"imageUpload__progress",value:b,max:"100"}),o.a.createElement("input",{type:"text",onChange:function(e){return s(e.target.value)},placeholder:"Enter a caption...",value:r}),o.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files;console.log(t),f(e.target.files[0]),console.log(g),e.target.files[0]&&(f(e.target.files[0]),console.log(g))}}),o.a.createElement(v.a,{onClick:function(e){d.ref("images/".concat(g.name)).put(g).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);_(t)}),(function(e){console.log(e),alert(e.message)}),(function(){d.ref("images").child(g.name).getDownloadURL().then((function(e){u.collection("posts").add({timestamp:m.a.firestore.FieldValue.serverTimestamp(),caption:r,imageUrl:e,username:t}),_(0),s(""),f(null)}))}))}},"Upload"))},_=a(40);function w(){return Math.round(20*Math.random())-10}function j(){var e=50+w(),t=50+w();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var N=Object(f.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var y=function(){var e=N(),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),m=i[0],d=i[1],f=Object(n.useState)(!1),w=Object(l.a)(f,2),y=w[0],O=w[1],S=Object(n.useState)(""),C=Object(l.a)(S,2),x=C[0],k=C[1],U=Object(n.useState)(""),I=Object(l.a)(U,2),A=I[0],B=I[1],L=Object(n.useState)(""),M=Object(l.a)(L,2),P=M[0],W=M[1],D=Object(n.useState)(null),R=Object(l.a)(D,2),T=R[0],F=R[1],V=o.a.useState(j),z=Object(l.a)(V,1)[0];return Object(n.useEffect)((function(){var e=p.onAuthStateChanged((function(e){if(e){if(console.log(e),F(e),!e.displayName)return e.updateProfile({displayName:P})}else F(null)}));return function(){e()}}),[T,P]),Object(n.useEffect)((function(){u.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[c]),o.a.createElement("div",{className:"app"},o.a.createElement(h.a,{open:y,onClose:function(){return O(!1)}},o.a.createElement("div",{style:z,className:e.paper},o.a.createElement("form",{className:"app__signUp"},o.a.createElement("center",null,o.a.createElement("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})),o.a.createElement(E.a,{placeholder:"username",type:"text",value:P,onChange:function(e){return W(e.target.value)}}),o.a.createElement(E.a,{placeholder:"password",type:"text",value:x,onChange:function(e){return k(e.target.value)}}),o.a.createElement(E.a,{placeholder:"email",type:"text",value:A,onChange:function(e){return B(e.target.value)}}),o.a.createElement(v.a,{onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(A,x).then((function(e){return e.user.updateProfile({displayName:P})})).catch((function(e){return alert(e.message)})),O(!1)}},"Submit")))),o.a.createElement(h.a,{open:m,onClose:function(){return d(!1)}},o.a.createElement("div",{style:z,className:e.paper},o.a.createElement("form",{className:"app__signUp"},o.a.createElement("center",null,o.a.createElement("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})),o.a.createElement(E.a,{placeholder:"email",type:"text",value:A,onChange:function(e){return B(e.target.value)}}),o.a.createElement(E.a,{placeholder:"password",type:"text",value:x,onChange:function(e){return k(e.target.value)}}),o.a.createElement(v.a,{onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(A,x).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),d(!1)}},"Login")))),o.a.createElement("div",{className:"app__header"},o.a.createElement("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),T?o.a.createElement(v.a,{onClick:function(){return p.signOut()}},"Logout"):o.a.createElement("div",{className:"app__loginContainer"},o.a.createElement(v.a,{onClick:function(){return d(!0)}},"Sign in"),o.a.createElement(v.a,{onClick:function(){return O(!0)}},"Sign up"))),o.a.createElement("div",{className:"app__posts"},o.a.createElement("div",{className:"app__postsLeft"},c.map((function(e){var t=e.id,a=e.post;return o.a.createElement(g,{key:t,postId:t,user:T,username:a.username,caption:a.caption,imageUrl:a.imageUrl})}))),o.a.createElement("div",{className:"app__postsRight"},o.a.createElement(_.a,{url:"https://www.instagram.com/mariosobhy9/",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}}))),(null===T||void 0===T?void 0:T.displayName)?o.a.createElement(b,{username:T.displayName}):o.a.createElement("h3",null,"Login to upload"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.6492da01.chunk.js.map